{% load static %}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Available Unlock Dates</title>
</head>
<body style="font-family: Arial, Helvetica, sans-serif; background:#f4f6f8; color:#111; padding:20px;">
  <h2>Available Unlock Dates</h2>
  <p>Choose a date below to book an unlock. Your current bookings are shown below.</p>

  {% for message in messages %}
    <div style="padding:8px;border-radius:6px;margin-bottom:8px;background:#fff;">{{ message }}</div>
  {% endfor %}

  <div style="display:flex;gap:20px;flex-wrap:wrap;">
    {% for slot in slots %}
      <div style="background:#fff;padding:12px;border-radius:8px;min-width:220px;box-shadow:0 6px 18px rgba(0,0,0,.06);">
        <div style="font-weight:700;">{{ slot.date }}</div>
  <div style="color:#666;margin-top:6px;">Booked: {{ slot.bookings.count }}</div>
        <form method="post" style="margin-top:8px;">
          {% csrf_token %}
          <input type="hidden" name="slot_id" value="{{ slot.id }}" />
          <button type="submit" style="padding:8px 10px;border-radius:6px;background:#007bff;color:#fff;border:none;cursor:pointer;">Book</button>
        </form>
      </div>
    {% empty %}
      <div>No unlock dates available.</div>
    {% endfor %}
  </div>

  <h3 style="margin-top:24px;">Your Bookings</h3>
  <ul>
    {% for b in bookings %}
      <li>{{ b.slot.date }} (booked at {{ b.booked_at }})</li>
    {% empty %}
      <li>No bookings yet.</li>
    {% endfor %}
  </ul>

  <p><a href="{% url 'dashboard' %}">Back to dashboard</a></p>
</body>
</html>